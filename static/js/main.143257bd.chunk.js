(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){e.exports=a(73)},43:function(e,t,a){},44:function(e,t,a){},69:function(e,t,a){},71:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(33),c=a.n(s),l=(a(43),a(7)),o=(a(44),a(6)),i="https://api.jsonbin.io/b",u="login_access_token";var m=Object(o.g)(function(e){return r.a.createElement("nav",{className:"navbar navbar-dark bg-dark-blue"},r.a.createElement("div",{className:"row col-12 d-flex text-white"},r.a.createElement("span",{className:"h3"},localStorage.getItem(u)?"Secret Santa":"Login"),r.a.createElement("div",{className:"ml-auto"},function(){if("/home"===e.location.pathname)return r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return localStorage.removeItem(u),void e.history.push("/")}},"Logga ut")}())))}),d=a(14),f=a.n(d),p=a(19),b=a(15),h=a(2),v=a(17),E=a.n(v),g=a(36),w=a.n(g);a(69);var j=Object(o.g)(function(e){var t=Object(n.useState)({username:"",password:"",successMessage:null}),a=Object(l.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)([]),m=Object(l.a)(o,2),d=m[0],v=m[1];Object(n.useEffect)(function(){j()},[]);var g=function(e){var t=e.target,a=t.id,n=t.value;c(function(e){return Object(h.a)({},e,Object(b.a)({},a,n))})},j=function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E.a.get(i+"/619beb2f62ed886f91531862/latest").then(function(e){var t=[];e.data.forEach(function(e){e.lastUpdated&&""!==e.wishlist&&t.push({lastUpdated:w()(e.lastUpdated).format("YYYY-MM-DD kk:mm"),name:e.name})}),v(t.sort(function(e,t){return new Date(t.lastUpdated)-new Date(e.lastUpdated)}))}).catch(function(e){console.log(e)});case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),k=function(){e.updateTitle("Home"),e.history.push("/home")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card col-md-6 col-sm-12 login-card p-3 mt-2 hv-center"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group text-left"},r.a.createElement("label",{htmlFor:"exampleInputUsername1"},"Anv\xe4ndarnamn"),r.a.createElement("input",{type:"username",className:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"Skriv anv\xe4ndarnamn",value:s.username,onChange:g})),r.a.createElement("div",{className:"form-group text-left"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"L\xf6senord"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"L\xf6senord",value:s.password,onChange:g})),r.a.createElement("div",{className:"form-check"}),r.a.createElement("button",{type:"submit",className:"btn btn-dark-blue",onClick:function(t){t.preventDefault();var a={username:s.username,password:s.password};E.a.get(i+"/619bead00ddbee6f8b104f1b").then(function(t){if(200===t.status){var n=t.data.find(function(e){return e.username===a.username.trim().toLowerCase()});if(n)if(n&&n.password!==a.password)e.showError("Username and password do not match");else{c(function(e){return Object(h.a)({},e,{successMessage:"Login successful. Redirecting to home page.."})});var r=n.id;localStorage.setItem(u,r),k(),e.showError(null)}else e.showError("Username does not exists")}else e.showError("Something went wrong")}).catch(function(e){console.log(e)})}},"Logga in")),r.a.createElement("div",{className:"alert alert-success mt-2",style:{display:s.successMessage?"block":"none"},role:"alert"},s.successMessage)),d.length>0&&r.a.createElement("div",{className:"card col-md-6 col-sm-12 login-card p-3 mt-2 hv-center"},r.a.createElement("p",{className:"mt-2"},"Senast uppdaterade \xf6nskelistor"),r.a.createElement("hr",{className:"mt-0"}),d.length>0&&d.map(function(e,t){return r.a.createElement("div",{className:"row",key:t},r.a.createElement("div",{className:"col-4"},e.name),r.a.createElement("div",{className:"col-8"},e.lastUpdated))})))}),k=a(37),O=a(75),N=a(76);var S=function(e){var t=Object(n.useState)(e.wishlistText?e.wishlistText:""),a=Object(l.a)(t,2),s=a[0],c=a[1];return r.a.createElement(O.a,null,r.a.createElement(O.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1"},r.a.createElement(O.a.Label,null,e.name?"".concat(e.name,"s \xf6nskelista"):"Din \xf6nskelista"),r.a.createElement(O.a.Control,{as:"textarea",rows:4,value:s,onChange:function(e){return c(e.target.value)},disabled:e.disabled})),!e.disabled&&(e.isSaving?r.a.createElement("div",{className:"alert alert-success mt-2",style:{display:e.isSaving?"block":"none"},role:"alert"},"Sparar..."):r.a.createElement(N.a,{className:"btn-dark-blue",type:"button",onClick:e.onSaveWishlist?function(){return e.onSaveWishlist(s)}:void 0},"Spara")))};var x=Object(o.g)(function(e){var t=Object(n.useState)(void 0),a=Object(l.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)(void 0),m=Object(l.a)(o,2),d=m[0],b=m[1],v=Object(n.useState)(!1),g=Object(l.a)(v,2),w=g[0],j=g[1];function O(){e.history.push("/")}Object(n.useEffect)(function(){N()},[]);var N=function(){E.a.get(i+"/619beb2f62ed886f91531862/latest").then(function(e){200!==e.status&&O();var t=e.data.find(function(e){return e.id===parseInt(localStorage.getItem(u))});t?(c(t),void 0!==t.secretsanta&&null!==t.secretsanta&&b(e.data.find(function(e){return e.id===t.secretsanta}))):O()}).catch(function(e){O()})},x=function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(i+"/619beb2f62ed886f91531862/latest").then(function(e){return e.data}).catch(function(e){console.log(e)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),y=function(e){E.a.put(i+"/619beb2f62ed886f91531862",e).then(function(e){j(!1),N()}).catch(function(e){j(!1)})},U=function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,x();case 3:a=e.sent,n=a.map(function(e){return e.id===parseInt(localStorage.getItem(u))?Object(h.a)({},e,{wishlist:t,lastUpdated:new Date}):e}),y(n);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,x();case 3:t=e.sent;case 4:if(a=M(t),n=a.successful,r=a.updatedUsers,!n){e.next=9;break}return y(r),e.abrupt("break",11);case 9:e.next=4;break;case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),M=function(e){var t=Object(k.a)(e),a=t.slice(),n=t.slice();for(a.sort(function(){return.5-Math.random()}),n.sort(function(){return.5-Math.random()});a.length;){var r=a.pop(),s=n[0]===r?n.pop():n.shift();if(r.partner===s.partner)return{successful:!1,updatedUsers:e};e=e.map(function(e){return e.id===r.id?Object(h.a)({},e,{secretsanta:s.id}):e})}return{successful:!0,updatedUsers:e}};return r.a.createElement("div",{className:"card col-md-6 col-sm-12 mt-4 p-3"},r.a.createElement("p",{className:"mt-2"},"Skriv minst en sak du \xf6nskar dig"),s&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(S,{wishlistText:s.wishlist,onSaveWishlist:function(e){return U(e)},isSaving:w}))),d&&r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-12"},r.a.createElement(S,{name:d.name,wishlistText:d.wishlist,disabled:!0}))),"0"===localStorage.getItem(u)&&r.a.createElement("button",{className:"btn btn-dark-blue mr-3",onClick:function(){window.confirm("Vill du slumpa secret santa?")&&I()}},"Assign secret santa"))}),y=a(3);var U=function(e){var t=e.children,a=Object(y.a)(e,["children"]);return r.a.createElement(o.b,Object.assign({},a,{render:function(e){var a=e.location;return localStorage.getItem(u)?t:r.a.createElement(o.a,{to:{pathname:"/login",state:{from:a}}})}}))},I=a(18);a(71);var M=function(e){var t=Object(n.useState)("none"),a=Object(l.a)(t,2),s=a[0],c=a[1],o=function(){c("none"),e.hideError(null)};return Object(n.useEffect)(function(){null!==e.errorMessage?c("block"):o()}),r.a.createElement("div",{className:"col-md-6 col-sm-12 alert alert-danger alert-dismissable mt-4",role:"alert",id:"alertPopUp",style:{display:s}},r.a.createElement("div",{className:"d-flex alertMessage"},r.a.createElement("span",null,e.errorMessage),r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(){return o()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))};var C=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(null),i=Object(l.a)(c,2),u=i[0],d=i[1];return r.a.createElement(I.a,{basename:"/2021"},r.a.createElement("div",{className:"App"},r.a.createElement(m,{title:a}),r.a.createElement("div",{className:"container flex-column"},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/",exact:!0},r.a.createElement(j,{showError:d,updateTitle:s})),r.a.createElement(o.b,{path:"/login"},r.a.createElement(j,{showError:d,updateTitle:s})),r.a.createElement(U,{path:"/home"},r.a.createElement(x,null))),r.a.createElement(M,{errorMessage:u,hideError:d}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(72);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})}},[[38,1,2]]]);
//# sourceMappingURL=main.143257bd.chunk.js.map