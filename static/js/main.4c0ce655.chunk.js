(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){e.exports=a(70)},41:function(e,t,a){},42:function(e,t,a){},65:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(33),c=a.n(s),o=(a(41),a(7)),l=(a(42),a(6)),i="login_access_token";var u=Object(l.g)(function(e){return r.a.createElement("nav",{className:"navbar navbar-dark bg-dark-blue"},r.a.createElement("div",{className:"row col-12 d-flex text-white"},r.a.createElement("span",{className:"h3"},localStorage.getItem(i)?"Secret Santa":"Login"),function(){if("/home"===e.location.pathname)return r.a.createElement("div",{className:"ml-auto"},r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return localStorage.removeItem(i),void e.history.push("/login")}},"Logout"))}()))}),m=a(14),d=a(2),f=a(17),b=a.n(f);a(65);var p=Object(l.g)(function(e){var t=Object(n.useState)({username:"",password:"",successMessage:null}),a=Object(o.a)(t,2),s=a[0],c=a[1],l=function(e){var t=e.target,a=t.id,n=t.value;c(function(e){return Object(d.a)({},e,Object(m.a)({},a,n))})},u=function(){e.updateTitle("Home"),e.history.push("/home")};return r.a.createElement("div",{className:"card col-md-6 col-sm-12 login-card p-3 mt-2 hv-center"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group text-left"},r.a.createElement("label",{htmlFor:"exampleInputUsername1"},"Anv\xe4ndarnamn"),r.a.createElement("input",{type:"username",className:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"Skriv anv\xe4ndarnamn",value:s.username,onChange:l})),r.a.createElement("div",{className:"form-group text-left"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"L\xf6senord"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"L\xf6senord",value:s.password,onChange:l})),r.a.createElement("div",{className:"form-check"}),r.a.createElement("button",{type:"submit",className:"btn btn-dark-blue",onClick:function(t){t.preventDefault();var a={username:s.username,password:s.password};b.a.get("https://api.jsonbin.io/b/619bead00ddbee6f8b104f1b").then(function(t){if(200===t.status){var n=t.data.find(function(e){return e.username===a.username.trim().toLowerCase()});if(n)if(n&&n.password!==a.password)e.showError("Username and password do not match");else{c(function(e){return Object(d.a)({},e,{successMessage:"Login successful. Redirecting to home page.."})});var r=n.id;localStorage.setItem(i,r),u(),e.showError(null)}else e.showError("Username does not exists")}else e.showError("Something went wrong")}).catch(function(e){console.log(e)})}},"Logga in")),r.a.createElement("div",{className:"alert alert-success mt-2",style:{display:s.successMessage?"block":"none"},role:"alert"},s.successMessage))}),h=a(18),v=a.n(h),g=a(21),E=a(72),w=a(73);var j=function(e){var t=Object(n.useState)(e.wishlistText?e.wishlistText:""),a=Object(o.a)(t,2),s=a[0],c=a[1];return r.a.createElement(E.a,null,r.a.createElement(E.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1"},r.a.createElement(E.a.Label,null,e.name?"".concat(e.name,"s \xf6nskelista"):"Din \xf6nskelista"),r.a.createElement(E.a.Control,{as:"textarea",rows:4,value:s,onChange:function(e){return c(e.target.value)},disabled:e.disabled})),!e.disabled&&(e.isSaving?r.a.createElement("div",{className:"alert alert-success mt-2",style:{display:e.isSaving?"block":"none"},role:"alert"},"Sparar..."):r.a.createElement(w.a,{className:"btn-dark-blue",type:"button",onClick:e.onSaveWishlist?function(){return e.onSaveWishlist(s)}:void 0},"Spara")))};var O=Object(l.g)(function(e){var t=Object(n.useState)(void 0),a=Object(o.a)(t,2),s=a[0],c=a[1],l=Object(n.useState)(void 0),u=Object(o.a)(l,2),m=u[0],f=u[1],p=Object(n.useState)(!1),h=Object(o.a)(p,2),E=h[0],w=h[1];function O(){e.history.push("/login")}Object(n.useEffect)(function(){S()},[]);var S=function(){b.a.get("https://api.jsonbin.io/b/619beb2f62ed886f91531862/latest").then(function(e){console.log(e),200!==e.status&&O();var t=e.data.find(function(e){return e.id===parseInt(localStorage.getItem(i))});t?(c(t),void 0!==t.secretsanta&&null!==t.secretsanta&&f(e.data.find(function(e){return e.id===t.secretsanta}))):O()}).catch(function(e){O()})},N=function(){var e=Object(g.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("https://api.jsonbin.io/b/619beb2f62ed886f91531862/latest").then(function(e){return e.data}).catch(function(e){O()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(g.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,N();case 3:a=e.sent,n=a.map(function(e){return e.id===parseInt(localStorage.getItem(i))?Object(d.a)({},e,{wishlist:t}):e}),b.a.put("https://api.jsonbin.io/b/619beb2f62ed886f91531862",n).then(function(e){S(),w(!1)}).catch(function(e){w(!1)});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"mt-2"},"Skriv minst en sak du \xf6nskar dig"),s&&r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"mt-2 col-md-6 col-sm-12"},r.a.createElement(j,{wishlistText:s.wishlist,onSaveWishlist:function(e){return k(e)},isSaving:E}))),m&&r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement(j,{name:m.name,wishlistText:m.wishlist,disabled:!0}))))}),S=a(3);var N=function(e){var t=e.children,a=Object(S.a)(e,["children"]);return r.a.createElement(l.b,Object.assign({},a,{render:function(e){var a=e.location;return localStorage.getItem(i)?t:r.a.createElement(l.a,{to:{pathname:"/login",state:{from:a}}})}}))},k=a(16);a(68);var x=function(e){var t=Object(n.useState)("none"),a=Object(o.a)(t,2),s=a[0],c=a[1],l=function(){c("none"),e.hideError(null)};return Object(n.useEffect)(function(){null!==e.errorMessage?c("block"):l()}),r.a.createElement("div",{className:"col-md-6 col-sm-12 alert alert-danger alert-dismissable mt-4",role:"alert",id:"alertPopUp",style:{display:s}},r.a.createElement("div",{className:"d-flex alertMessage"},r.a.createElement("span",null,e.errorMessage),r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(){return l()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))};var y=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(null),i=Object(o.a)(c,2),m=i[0],d=i[1];return r.a.createElement(k.a,{basename:"/2021"},r.a.createElement("div",{className:"App"},r.a.createElement(u,{title:a}),r.a.createElement("div",{className:"container flex-column"},r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/",exact:!0},r.a.createElement(p,{showError:d,updateTitle:s})),r.a.createElement(l.b,{path:"/login"},r.a.createElement(p,{showError:d,updateTitle:s})),r.a.createElement(N,{path:"/home"},r.a.createElement(O,null))),r.a.createElement(x,{errorMessage:m,hideError:d}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(69);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})}},[[36,1,2]]]);
//# sourceMappingURL=main.4c0ce655.chunk.js.map