(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,a){e.exports=a(71)},42:function(e,t,a){},43:function(e,t,a){},67:function(e,t,a){},69:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(33),c=a.n(s),o=(a(42),a(7)),l=(a(43),a(14)),i=a.n(l),u=a(2),m=a(36),d=a(19),f=a(6),p=a(15),b=a.n(p),h="https://api.jsonbin.io/b",v="login_access_token";var g=Object(f.g)(function(e){function t(){return(t=Object(d.a)(i.a.mark(function e(){var t,r,s,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:t=e.sent;case 3:if(r=a(t),s=r.successful,c=r.updatedUsers,!s){e.next=8;break}return b.a.put(h+"/619beb2f62ed886f91531862",c).then(function(e){}).catch(function(e){console.log(e)}),e.abrupt("break",10);case 8:e.next=3;break;case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function a(e){var t=Object(m.a)(e),a=t.slice(),n=t.slice();for(a.sort(function(){return.5-Math.random()}),n.sort(function(){return.5-Math.random()});a.length;){var r=a.pop(),s=n[0]==r?n.pop():n.shift();if(r.partner===s.partner)return{successful:!1,updatedUsers:e};e=e.map(function(e){return e.id===r.id?Object(u.a)({},e,{secretsanta:s.id}):e})}return{successful:!0,updatedUsers:e}}var n=function(){var e=Object(d.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(h+"/619beb2f62ed886f91531862/latest").then(function(e){return e.data}).catch(function(e){console.log(e)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("nav",{className:"navbar navbar-dark bg-dark-blue"},r.a.createElement("div",{className:"row col-12 d-flex text-white"},r.a.createElement("span",{className:"h3"},localStorage.getItem(v)?"Secret Santa":"Login"),r.a.createElement("div",{className:"ml-auto"},localStorage.getItem(v)&&"0"===localStorage.getItem(v)&&r.a.createElement("button",{className:"btn btn-light-blue mr-3",onClick:function(){window.confirm("Vill du slumpa secret santa?")&&function(){t.apply(this,arguments)}()}},"Assign secret santa"),function(){if("/home"===e.location.pathname)return r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return localStorage.removeItem(v),void e.history.push("/login")}},"Logga ut")}())))}),E=a(16);a(67);var w=Object(f.g)(function(e){var t=Object(n.useState)({username:"",password:"",successMessage:null}),a=Object(o.a)(t,2),s=a[0],c=a[1],l=function(e){var t=e.target,a=t.id,n=t.value;c(function(e){return Object(u.a)({},e,Object(E.a)({},a,n))})},i=function(){e.updateTitle("Home"),e.history.push("/home")};return r.a.createElement("div",{className:"card col-md-6 col-sm-12 login-card p-3 mt-2 hv-center"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group text-left"},r.a.createElement("label",{htmlFor:"exampleInputUsername1"},"Anv\xe4ndarnamn"),r.a.createElement("input",{type:"username",className:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"Skriv anv\xe4ndarnamn",value:s.username,onChange:l})),r.a.createElement("div",{className:"form-group text-left"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"L\xf6senord"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"L\xf6senord",value:s.password,onChange:l})),r.a.createElement("div",{className:"form-check"}),r.a.createElement("button",{type:"submit",className:"btn btn-dark-blue",onClick:function(t){t.preventDefault();var a={username:s.username,password:s.password};b.a.get(h+"/619bead00ddbee6f8b104f1b").then(function(t){if(200===t.status){var n=t.data.find(function(e){return e.username===a.username.trim().toLowerCase()});if(n)if(n&&n.password!==a.password)e.showError("Username and password do not match");else{c(function(e){return Object(u.a)({},e,{successMessage:"Login successful. Redirecting to home page.."})});var r=n.id;localStorage.setItem(v,r),i(),e.showError(null)}else e.showError("Username does not exists")}else e.showError("Something went wrong")}).catch(function(e){console.log(e)})}},"Logga in")),r.a.createElement("div",{className:"alert alert-success mt-2",style:{display:s.successMessage?"block":"none"},role:"alert"},s.successMessage))}),j=a(73),O=a(74);var k=function(e){var t=Object(n.useState)(e.wishlistText?e.wishlistText:""),a=Object(o.a)(t,2),s=a[0],c=a[1];return r.a.createElement(j.a,null,r.a.createElement(j.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1"},r.a.createElement(j.a.Label,null,e.name?"".concat(e.name,"s \xf6nskelista"):"Din \xf6nskelista"),r.a.createElement(j.a.Control,{as:"textarea",rows:4,value:s,onChange:function(e){return c(e.target.value)},disabled:e.disabled})),!e.disabled&&(e.isSaving?r.a.createElement("div",{className:"alert alert-success mt-2",style:{display:e.isSaving?"block":"none"},role:"alert"},"Sparar..."):r.a.createElement(O.a,{className:"btn-dark-blue",type:"button",onClick:e.onSaveWishlist?function(){return e.onSaveWishlist(s)}:void 0},"Spara")))};var S=Object(f.g)(function(e){var t=Object(n.useState)(void 0),a=Object(o.a)(t,2),s=a[0],c=a[1],l=Object(n.useState)(void 0),m=Object(o.a)(l,2),f=m[0],p=m[1],g=Object(n.useState)(!1),E=Object(o.a)(g,2),w=E[0],j=E[1];function O(){e.history.push("/login")}Object(n.useEffect)(function(){S()},[]);var S=function(){b.a.get(h+"/619beb2f62ed886f91531862/latest").then(function(e){200!==e.status&&O();var t=e.data.find(function(e){return e.id===parseInt(localStorage.getItem(v))});t?(c(t),void 0!==t.secretsanta&&null!==t.secretsanta&&p(e.data.find(function(e){return e.id===t.secretsanta}))):O()}).catch(function(e){O()})},x=function(){var e=Object(d.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(h+"/619beb2f62ed886f91531862/latest").then(function(e){return e.data}).catch(function(e){console.log(e)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,x();case 3:a=e.sent,n=a.map(function(e){return e.id===parseInt(localStorage.getItem(v))?Object(u.a)({},e,{wishlist:t}):e}),b.a.put(h+"/619beb2f62ed886f91531862",n).then(function(e){S(),j(!1)}).catch(function(e){j(!1)});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"card col-md-6 col-sm-12 mt-4 p-3"},r.a.createElement("p",{className:"mt-2"},"Skriv minst en sak du \xf6nskar dig"),s&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(k,{wishlistText:s.wishlist,onSaveWishlist:function(e){return N(e)},isSaving:w}))),f&&r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-12"},r.a.createElement(k,{name:f.name,wishlistText:f.wishlist,disabled:!0}))))}),x=a(3);var N=function(e){var t=e.children,a=Object(x.a)(e,["children"]);return r.a.createElement(f.b,Object.assign({},a,{render:function(e){var a=e.location;return localStorage.getItem(v)?t:r.a.createElement(f.a,{to:{pathname:"/login",state:{from:a}}})}}))},y=a(18);a(69);var I=function(e){var t=Object(n.useState)("none"),a=Object(o.a)(t,2),s=a[0],c=a[1],l=function(){c("none"),e.hideError(null)};return Object(n.useEffect)(function(){null!==e.errorMessage?c("block"):l()}),r.a.createElement("div",{className:"col-md-6 col-sm-12 alert alert-danger alert-dismissable mt-4",role:"alert",id:"alertPopUp",style:{display:s}},r.a.createElement("div",{className:"d-flex alertMessage"},r.a.createElement("span",null,e.errorMessage),r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(){return l()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))};var C=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(null),l=Object(o.a)(c,2),i=l[0],u=l[1];return r.a.createElement(y.a,{basename:"/2021"},r.a.createElement("div",{className:"App"},r.a.createElement(g,{title:a}),r.a.createElement("div",{className:"container flex-column"},r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/",exact:!0},r.a.createElement(w,{showError:u,updateTitle:s})),r.a.createElement(f.b,{path:"/login"},r.a.createElement(w,{showError:u,updateTitle:s})),r.a.createElement(N,{path:"/home"},r.a.createElement(S,null))),r.a.createElement(I,{errorMessage:i,hideError:u}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(70);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})}},[[37,1,2]]]);
//# sourceMappingURL=main.5957c847.chunk.js.map