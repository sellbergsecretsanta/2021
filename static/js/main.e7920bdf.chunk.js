(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,a){e.exports=a(71)},42:function(e,t,a){},43:function(e,t,a){},66:function(e,t,a){},69:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(33),c=a.n(s),o=(a(42),a(7)),l=(a(43),a(6)),i="https://api.jsonbin.io/b",u="login_access_token";var m=Object(l.g)(function(e){return r.a.createElement("nav",{className:"navbar navbar-dark bg-dark-blue"},r.a.createElement("div",{className:"row col-12 d-flex text-white"},r.a.createElement("span",{className:"h3"},localStorage.getItem(u)?"Secret Santa":"Login"),r.a.createElement("div",{className:"ml-auto"},function(){if("/home"===e.location.pathname)return r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return localStorage.removeItem(u),void e.history.push("/")}},"Logga ut")}())))}),d=a(14),f=a(2),p=a(18),b=a.n(p);a(66);var v=Object(l.g)(function(e){var t=Object(n.useState)({username:"",password:"",successMessage:null}),a=Object(o.a)(t,2),s=a[0],c=a[1],l=function(e){var t=e.target,a=t.id,n=t.value;c(function(e){return Object(f.a)({},e,Object(d.a)({},a,n))})},m=function(){e.updateTitle("Home"),e.history.push("/home")};return r.a.createElement("div",{className:"card col-md-6 col-sm-12 login-card p-3 mt-2 hv-center"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group text-left"},r.a.createElement("label",{htmlFor:"exampleInputUsername1"},"Anv\xe4ndarnamn"),r.a.createElement("input",{type:"username",className:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"Skriv anv\xe4ndarnamn",value:s.username,onChange:l})),r.a.createElement("div",{className:"form-group text-left"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"L\xf6senord"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"L\xf6senord",value:s.password,onChange:l})),r.a.createElement("div",{className:"form-check"}),r.a.createElement("button",{type:"submit",className:"btn btn-dark-blue",onClick:function(t){t.preventDefault();var a={username:s.username,password:s.password};b.a.get(i+"/619bead00ddbee6f8b104f1b").then(function(t){if(200===t.status){var n=t.data.find(function(e){return e.username===a.username.trim().toLowerCase()});if(n)if(n&&n.password!==a.password)e.showError("Username and password do not match");else{c(function(e){return Object(f.a)({},e,{successMessage:"Login successful. Redirecting to home page.."})});var r=n.id;localStorage.setItem(u,r),m(),e.showError(null)}else e.showError("Username does not exists")}else e.showError("Something went wrong")}).catch(function(e){console.log(e)})}},"Logga in")),r.a.createElement("div",{className:"alert alert-success mt-2",style:{display:s.successMessage?"block":"none"},role:"alert"},s.successMessage))}),h=a(36),g=a(16),E=a.n(g),w=a(19),j=a(73),O=a(74);var k=function(e){var t=Object(n.useState)(e.wishlistText?e.wishlistText:""),a=Object(o.a)(t,2),s=a[0],c=a[1];return r.a.createElement(j.a,null,r.a.createElement(j.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1"},r.a.createElement(j.a.Label,null,e.name?"".concat(e.name,"s \xf6nskelista"):"Din \xf6nskelista"),r.a.createElement(j.a.Control,{as:"textarea",rows:4,value:s,onChange:function(e){return c(e.target.value)},disabled:e.disabled})),!e.disabled&&(e.isSaving?r.a.createElement("div",{className:"alert alert-success mt-2",style:{display:e.isSaving?"block":"none"},role:"alert"},"Sparar..."):r.a.createElement(O.a,{className:"btn-dark-blue",type:"button",onClick:e.onSaveWishlist?function(){return e.onSaveWishlist(s)}:void 0},"Spara")))};var S=Object(l.g)(function(e){var t=Object(n.useState)(void 0),a=Object(o.a)(t,2),s=a[0],c=a[1],l=Object(n.useState)(void 0),m=Object(o.a)(l,2),d=m[0],p=m[1],v=Object(n.useState)(!1),g=Object(o.a)(v,2),j=g[0],O=g[1];function S(){e.history.push("/")}Object(n.useEffect)(function(){N()},[]);var N=function(){b.a.get(i+"/619beb2f62ed886f91531862/latest").then(function(e){200!==e.status&&S();var t=e.data.find(function(e){return e.id===parseInt(localStorage.getItem(u))});t?(c(t),void 0!==t.secretsanta&&null!==t.secretsanta&&p(e.data.find(function(e){return e.id===t.secretsanta}))):S()}).catch(function(e){S()})},x=function(){var e=Object(w.a)(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(i+"/619beb2f62ed886f91531862/latest").then(function(e){return e.data}).catch(function(e){console.log(e)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),y=function(e){b.a.put(i+"/619beb2f62ed886f91531862",e).then(function(e){O(!1),N()}).catch(function(e){O(!1)})},I=function(){var e=Object(w.a)(E.a.mark(function e(t){var a,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,x();case 3:a=e.sent,n=a.map(function(e){return e.id===parseInt(localStorage.getItem(u))?Object(f.a)({},e,{wishlist:t}):e}),y(n);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(w.a)(E.a.mark(function e(){var t,a,n,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,x();case 3:t=e.sent;case 4:if(a=M(t),n=a.successful,r=a.updatedUsers,!n){e.next=9;break}return y(r),e.abrupt("break",11);case 9:e.next=4;break;case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),M=function(e){var t=Object(h.a)(e),a=t.slice(),n=t.slice();for(a.sort(function(){return.5-Math.random()}),n.sort(function(){return.5-Math.random()});a.length;){var r=a.pop(),s=n[0]==r?n.pop():n.shift();if(r.partner===s.partner)return{successful:!1,updatedUsers:e};e=e.map(function(e){return e.id===r.id?Object(f.a)({},e,{secretsanta:s.id}):e})}return{successful:!0,updatedUsers:e}};return r.a.createElement("div",{className:"card col-md-6 col-sm-12 mt-4 p-3"},r.a.createElement("p",{className:"mt-2"},"Skriv minst en sak du \xf6nskar dig"),s&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(k,{wishlistText:s.wishlist,onSaveWishlist:function(e){return I(e)},isSaving:j}))),d&&r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-12"},r.a.createElement(k,{name:d.name,wishlistText:d.wishlist,disabled:!0}))),"0"===localStorage.getItem(u)&&r.a.createElement("button",{className:"btn btn-dark-blue mr-3",onClick:function(){window.confirm("Vill du slumpa secret santa?")&&C()}},"Assign secret santa"))}),N=a(3);var x=function(e){var t=e.children,a=Object(N.a)(e,["children"]);return r.a.createElement(l.b,Object.assign({},a,{render:function(e){var a=e.location;return localStorage.getItem(u)?t:r.a.createElement(l.a,{to:{pathname:"/login",state:{from:a}}})}}))},y=a(17);a(69);var I=function(e){var t=Object(n.useState)("none"),a=Object(o.a)(t,2),s=a[0],c=a[1],l=function(){c("none"),e.hideError(null)};return Object(n.useEffect)(function(){null!==e.errorMessage?c("block"):l()}),r.a.createElement("div",{className:"col-md-6 col-sm-12 alert alert-danger alert-dismissable mt-4",role:"alert",id:"alertPopUp",style:{display:s}},r.a.createElement("div",{className:"d-flex alertMessage"},r.a.createElement("span",null,e.errorMessage),r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(){return l()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))};var C=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(null),i=Object(o.a)(c,2),u=i[0],d=i[1];return r.a.createElement(y.a,{basename:"/2021"},r.a.createElement("div",{className:"App"},r.a.createElement(m,{title:a}),r.a.createElement("div",{className:"container flex-column"},r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/",exact:!0},r.a.createElement(v,{showError:d,updateTitle:s})),r.a.createElement(l.b,{path:"/login"},r.a.createElement(v,{showError:d,updateTitle:s})),r.a.createElement(x,{path:"/home"},r.a.createElement(S,null))),r.a.createElement(I,{errorMessage:u,hideError:d}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(70);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})}},[[37,1,2]]]);
//# sourceMappingURL=main.e7920bdf.chunk.js.map