(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,a){e.exports=a(66)},39:function(e,t,a){},40:function(e,t,a){},63:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(31),s=a.n(l),c=(a(39),a(8)),o=(a(40),a(6)),i="https://secret-santa-json-server.herokuapp.com",u="login_access_token";var m=Object(o.g)(function(e){var t,a="string"!==typeof(t=e.location.pathname.substring(1,e.location.pathname.length))?"":t.charAt(0).toUpperCase()+t.slice(1);return"/"===e.location.pathname&&(a="Welcome"),r.a.createElement("nav",{className:"navbar navbar-dark bg-primary"},r.a.createElement("div",{className:"row col-12 d-flex justify-content-center text-white"},r.a.createElement("span",{className:"h3"},e.title||a),function(){if("/home"===e.location.pathname)return r.a.createElement("div",{className:"ml-auto"},r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return localStorage.removeItem(u),void e.history.push("/login")}},"Logout"))}()))}),d=a(14),h=a(2),f=a(17),p=a.n(f);a(63);var v=Object(o.g)(function(e){var t=Object(n.useState)({username:"",password:"",successMessage:null}),a=Object(c.a)(t,2),l=a[0],s=a[1],o=function(e){var t=e.target,a=t.id,n=t.value;s(function(e){return Object(h.a)({},e,Object(d.a)({},a,n))})},m=function(){e.updateTitle("Home"),e.history.push("/home")};return r.a.createElement("div",{className:"card col-4 login-card mt-2 hv-center"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group text-left"},r.a.createElement("label",{htmlFor:"exampleInputUsername1"},"Anv\xe4ndarnamn"),r.a.createElement("input",{type:"username",className:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"Skriv anv\xe4ndarnamn",value:l.username,onChange:o})),r.a.createElement("div",{className:"form-group text-left"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"L\xf6senord"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"L\xf6senord",value:l.password,onChange:o})),r.a.createElement("div",{className:"form-check"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(t){t.preventDefault();var a=l.username,n=l.password;p.a.get(i+"/auth").then(function(t){if(200===t.status){var r=t.data.find(function(e){return e.username===a});if(r)if(r&&r.password!==n)e.showError("Username and password do not match");else{s(function(e){return Object(h.a)({},e,{successMessage:"Login successful. Redirecting to home page.."})});var l=r.id;localStorage.setItem(u,l),m(),e.showError(null)}else e.showError("Username does not exists")}else e.showError("Something went wrong")}).catch(function(e){console.log(e)})}},"Logga in")),r.a.createElement("div",{className:"alert alert-success mt-2",style:{display:l.successMessage?"block":"none"},role:"alert"},l.successMessage))}),E=a(68),b=a(69);var g=function(e){var t=Object(n.useState)(e.wishlistText?e.wishlistText:""),a=Object(c.a)(t,2),l=a[0],s=a[1];return r.a.createElement(E.a,null,r.a.createElement(E.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1"},r.a.createElement(E.a.Label,null,e.name?"".concat(e.name,"s \xf6nskelista"):"Din \xf6nskelista"),r.a.createElement(E.a.Control,{as:"textarea",rows:4,value:l,onChange:function(e){return s(e.target.value)},disabled:e.disabled})),!e.disabled&&r.a.createElement(b.a,{variant:"primary",type:"button",onClick:e.onSaveWishlist?function(){return e.onSaveWishlist(l)}:void 0},"Spara"))};var w=Object(o.g)(function(e){var t=Object(n.useState)(void 0),a=Object(c.a)(t,2),l=a[0],s=a[1],o=Object(n.useState)(void 0),m=Object(c.a)(o,2),d=m[0],f=m[1];function v(){e.history.push("/login")}Object(n.useEffect)(function(){l?b():E()},[l]);var E=function(){p.a.get(i+"/users/"+localStorage.getItem(u)).then(function(e){200!==e.status?v():s(e.data)}).catch(function(e){v()})},b=function(){void 0!==l.secretsanta&&null!==l.secretsanta&&p.a.get(i+"/users/"+l.secretsanta).then(function(e){f(e.data)}).catch(function(e){})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Skriv minst en sak du \xf6nskar dig"),l&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mt-2 col-6"},r.a.createElement(g,{wishlistText:l.wishlist,onSaveWishlist:function(e){return function(e){var t=Object(h.a)({},l,{wishlist:e});p.a.put(i+"/users/"+localStorage.getItem(u),t).then(function(e){E()}).catch(function(e){})}(e)}}))),d&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mt-2 col-6"},r.a.createElement(g,{name:d.name,wishlistText:d.wishlist,disabled:!0}))))}),j=a(3);var O=function(e){var t=e.children,a=Object(j.a)(e,["children"]);return r.a.createElement(o.b,Object.assign({},a,{render:function(e){var a=e.location;return localStorage.getItem(u)?t:r.a.createElement(o.a,{to:{pathname:"/login",state:{from:a}}})}}))},N=a(16);a(65);var k=function(e){var t=Object(n.useState)("none"),a=Object(c.a)(t,2),l=a[0],s=a[1],o=function(){s("none"),e.hideError(null)};return Object(n.useEffect)(function(){null!==e.errorMessage?s("block"):o()}),r.a.createElement("div",{className:"alert alert-danger alert-dismissable mt-4",role:"alert",id:"alertPopUp",style:{display:l}},r.a.createElement("div",{className:"d-flex alertMessage"},r.a.createElement("span",null,e.errorMessage),r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(){return o()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))};var y=function(){var e=Object(n.useState)(null),t=Object(c.a)(e,2),a=t[0],l=t[1],s=Object(n.useState)(null),i=Object(c.a)(s,2),u=i[0],d=i[1];return r.a.createElement(N.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(m,{title:a}),r.a.createElement("div",{className:"container flex-column"},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/",exact:!0},r.a.createElement(v,{showError:d,updateTitle:l})),r.a.createElement(o.b,{path:"/login"},r.a.createElement(v,{showError:d,updateTitle:l})),r.a.createElement(O,{path:"/home"},r.a.createElement(w,null))),r.a.createElement(k,{errorMessage:u,hideError:d}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})}},[[34,1,2]]]);
//# sourceMappingURL=main.3e5eafd5.chunk.js.map